# frozen_string_literal: true

class Exploit < ApplicationRecord
  has_and_belongs_to_many :teams
  has_many :flags

  validates :source, :period, :timeout, :title, presence: true

  enum status: { down: 0, up: 1 }

  include Scopes::FlagsTemporal
  include Scopes::FlagsPartition
  include Scheduler

  after_save     -> { reschedule }
  before_destroy -> { unschedule }
end
