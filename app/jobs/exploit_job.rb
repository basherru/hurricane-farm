class ExploitJob < ApplicationJob
  queue_as :exploits

  def perform(team_id, exploit_id)
    team = Team.find(team_id)
    exploit = Exploit.find(exploit_id)
    return unless exploit.teams.include?(team)
    return if exploit.down? || team.down?

    Engine::Runner::TemporarilyExecutable.run(team, exploit)
  end
end